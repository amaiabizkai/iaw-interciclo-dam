{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { throwError } from 'rxjs';\nimport { catchError, tap, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class RepuestoService {\n  constructor(http) {\n    this.http = http;\n    this.repuestosUrl = 'http://localhost:8000/repuesto';\n    this.repuestosDetailUrl = 'http://localhost:8000/repuesto/details';\n    this.repuestosDeleteUrl = 'http://localhost:8000/repuesto/delete';\n    this.repuestosUpdateUrl = 'http://localhost:8000/repuesto/edit';\n    this.repuestosNewUrl = 'http://localhost:8000/repuesto/new';\n  }\n  //FUNCIONA BIEN\n  //NO MUESTRA UN CONSOLE LOG CON LOS DATOS RECIBIDOS DE LA API(INTENCIONADO)\n  getRepuestos() {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    return this.http.get(this.repuestosUrl, {\n      headers\n    }).pipe(catchError(this.handleError));\n  }\n  // MUESTRA UN CONSOLE LOG CON LOS DATOS RECIBIDOS DE LA API\n  // getRepuestos(): Observable<Repuesto[]> {\n  //   const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\n  //   return this.http.get<any>(this.repuestosAllUrl,{headers}).pipe(\n  //     tap((data) => console.log(JSON.stringify(data))),\n  //     catchError(this.handleError)\n  //   );\n  // }\n  //FUNCIONA\n  getMaxRepuestoId() {\n    return this.http.get(this.repuestosUrl).pipe(\n    // Get max value from an array\n    map(data => Math.max.apply(Math, data.map(function (o) {\n      return o.id;\n    }))), catchError(this.handleError));\n  }\n  //FUNCIONA BIEN\n  getRepuestoById(id) {\n    const url = `${this.repuestosUrl}++/\"details\"/${id}`;\n    return this.http.get(url).pipe(tap(data => console.log('getRepuesto: ' + JSON.stringify(data))), catchError(this.handleError));\n  }\n  //FUNCIONA BIEN\n  createRepuesto(repuesto) {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    repuesto.id = 0;\n    return this.http.post(this.repuestosNewUrl, repuesto, {\n      headers: headers\n    }).pipe(tap(data => console.log('Creado repuesto con id ' + JSON.stringify(data))), catchError(this.handleError));\n  }\n  //FUNCIONA BIEN\n  deleteRepuesto(id) {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    const url = `${this.repuestosDeleteUrl}/${id}`;\n    return this.http.delete(url, {\n      headers: headers\n    }).pipe(tap(data => console.log('Eliminado repuesto con id ' + id)), catchError(this.handleError));\n  }\n  //FUNCIONA\n  updateRepuesto(repuesto) {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    const url = `${this.repuestosUpdateUrl}/${repuesto.id}`;\n    return this.http.put(url, repuesto, {\n      headers: headers\n    }).pipe(tap(() => console.log('Editado repuesto con id ' + repuesto.id)),\n    // Return the repuesto on an update\n    map(() => repuesto), catchError(this.handleError));\n  }\n  handleError(err) {\n    // in a real world app, we may send the server to some remote logging infrastructure\n    // instead of just logging it to the console\n    let errorMessage;\n    if (err.error instanceof ErrorEvent) {\n      // A client-side or network error occurred. Handle it accordingly.\n      errorMessage = `An error occurred: ${err.error.message}`;\n    } else {\n      // The backend returned an unsuccessful response code.\n      // The response body may contain clues as to what went wrong,\n      errorMessage = `Backend returned code ${err.status}: ${err.body.error}`;\n    }\n    console.error(err);\n    return throwError(errorMessage);\n  }\n}\nRepuestoService.ɵfac = function RepuestoService_Factory(t) {\n  return new (t || RepuestoService)(i0.ɵɵinject(i1.HttpClient));\n};\nRepuestoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: RepuestoService,\n  factory: RepuestoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","throwError","catchError","tap","map","RepuestoService","constructor","http","getRepuestos","headers","get","repuestosUrl","pipe","handleError","getMaxRepuestoId","data","Math","max","apply","o","id","getRepuestoById","url","console","log","JSON","stringify","createRepuesto","repuesto","post","repuestosNewUrl","deleteRepuesto","repuestosDeleteUrl","delete","updateRepuesto","repuestosUpdateUrl","put","err","errorMessage","error","ErrorEvent","message","status","body","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\bcuta\\Desktop\\MAFAH\\client\\src\\app\\core\\repuesto.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\n\r\nimport { Observable, of, throwError } from 'rxjs';\r\nimport { catchError, tap, map } from 'rxjs/operators';\r\n\r\nimport { Repuesto } from '../shared/repuesto';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RepuestoService {\r\n  private repuestosUrl = 'http://localhost:8000/repuesto';\r\n  private repuestosDetailUrl = 'http://localhost:8000/repuesto/details';\r\n  private repuestosDeleteUrl = 'http://localhost:8000/repuesto/delete';\r\n  private repuestosUpdateUrl = 'http://localhost:8000/repuesto/edit';\r\n  private repuestosNewUrl = 'http://localhost:8000/repuesto/new';\r\n\r\n\r\n\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  //FUNCIONA BIEN\r\n  //NO MUESTRA UN CONSOLE LOG CON LOS DATOS RECIBIDOS DE LA API(INTENCIONADO)\r\n  getRepuestos(): Observable<Repuesto[]> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n\r\n    return this.http.get<any>(this.repuestosUrl,{headers}).pipe(\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n\r\n  // MUESTRA UN CONSOLE LOG CON LOS DATOS RECIBIDOS DE LA API\r\n  // getRepuestos(): Observable<Repuesto[]> {\r\n  //   const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n\r\n  //   return this.http.get<any>(this.repuestosAllUrl,{headers}).pipe(\r\n  //     tap((data) => console.log(JSON.stringify(data))),\r\n  //     catchError(this.handleError)\r\n  //   );\r\n  // }\r\n  \r\n  //FUNCIONA\r\n  getMaxRepuestoId(): Observable<number> {\r\n    return this.http.get<Repuesto[]>(this.repuestosUrl).pipe(\r\n      // Get max value from an array\r\n      map((data) =>\r\n        Math.max.apply(\r\n          Math,\r\n          data.map(function (o) {\r\n            return o.id;\r\n          })\r\n        )\r\n      ),\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n  //FUNCIONA BIEN\r\n  getRepuestoById(id: number): Observable<Repuesto> {\r\n    const url = `${this.repuestosUrl}++/\"details\"/${id}`;\r\n    return this.http.get<Repuesto>(url).pipe(\r\n      tap((data) => console.log('getRepuesto: ' + JSON.stringify(data))),\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n  //FUNCIONA BIEN\r\n  createRepuesto(repuesto: Repuesto): Observable<Repuesto> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    repuesto.id = 0;\r\n    return this.http\r\n      .post<Repuesto>(this.repuestosNewUrl, repuesto, { headers: headers })\r\n      .pipe(\r\n        tap((data) => console.log('Creado repuesto con id ' + JSON.stringify(data))),\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n  //FUNCIONA BIEN\r\n  deleteRepuesto(id: number): Observable<{}> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    const url = `${this.repuestosDeleteUrl}/${id}`;\r\n    return this.http.delete<Repuesto>(url, { headers: headers }).pipe(\r\n      tap((data) => console.log('Eliminado repuesto con id ' + id)),\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n  //FUNCIONA\r\n  updateRepuesto(repuesto: Repuesto): Observable<Repuesto> {\r\n    const headers = new HttpHeaders({ 'Content-Type': 'application/json' });\r\n    const url = `${this.repuestosUpdateUrl}/${repuesto.id}`;\r\n    return this.http.put<Repuesto>(url, repuesto,{ headers: headers }).pipe(\r\n      tap(() => console.log('Editado repuesto con id ' + repuesto.id)),\r\n      // Return the repuesto on an update\r\n      map(() => repuesto),\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n\r\n  private handleError(err: any) {\r\n    // in a real world app, we may send the server to some remote logging infrastructure\r\n    // instead of just logging it to the console\r\n    let errorMessage: string;\r\n    if (err.error instanceof ErrorEvent) {\r\n      // A client-side or network error occurred. Handle it accordingly.\r\n      errorMessage = `An error occurred: ${err.error.message}`;\r\n    } else {\r\n      // The backend returned an unsuccessful response code.\r\n      // The response body may contain clues as to what went wrong,\r\n      errorMessage = `Backend returned code ${err.status}: ${err.body.error}`;\r\n    }\r\n    console.error(err);\r\n    return throwError(errorMessage);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}